📄 로또 앱 PRD (Version 1.1)

1. 제품 개요
React Native 기반으로 iOS와 Android를 지원하는 로또 분석 및 당첨 확인 앱.
동행복권 API를 활용하여 실시간 당첨 번호 정보를 제공하며, 단계별 기능 확장을 통해 번호 분석, 추천, 판매점 정보 제공 기능을 갖춘 종합 로또 정보 플랫폼을 지향함.

2. 개발 로드맵 (단계별)

본 프로젝트는 아래 3단계에 걸쳐 점진적으로 기능을 개발하고 출시합니다.

### Phase 1: MVP (최소 기능 제품) - 핵심 경험 제공

- 목표: 가장 필수적인 '당첨 번호 확인' 기능을 사용자에게 빠르고 안정적으로 제공하여 초기 사용자 확보.
- 출시 버전: v1.0

#### 2.1. 홈 화면 (최신 당첨 번호)

- 최신 당첨 번호를 상단 고정 노출 (회차, 당첨일, 보너스 번호 포함)
- 회차별 당첨 정보 상세 보기 (당첨금액, 1등 당첨자 수 등)

#### 2.2. 빠른 당첨 확인 (QR 코드 스캔)

- 카메라 권한 요청 후 실시간 QR 코드 스캔
- 스캔 결과로 로또 용지의 회차, 당첨 여부, 당첨 등수 및 금액 표시

#### 2.3. 수익 모델 (기본 광고)

- 모든 무료 사용자 화면 하단에 Google AdMob 배너 광고 노출

---

### Phase 2: 핵심 기능 확장

- 목표: 사용자 잔존율(Retention)을 높이기 위한 핵심 분석 및 편의 기능 추가.

#### 2.4. 번호 분석

- **번호별 출현 횟수:** 기간 선택 가능 (최근 5주, 10주, 100주, 전체)
- **반복 출현 번호 분석:** 최근 회차 간 중복 번호 시각화
- **홀짝 비율 분석:** 역대 회차 홀짝 개수 비율 통계 차트
- **합계 분석:** 당첨 번호 합계의 통계 분포 그래프
- **패턴 분석:** 연속번호, 동일 끝수, 구간별 번호(1-10, 11-20 등) 분포

#### 2.5. 번호 생성

- **랜덤 생성**
- **사용자 조건 생성:**
  - 포함/제외 번호 설정
  - 홀짝 비율 선택
  - 합계 범위 입력

#### 2.6. 판매점 정보

- 현재 위치 기반 1등/2등 배출점 찾기 (GPS 권한 사용)
- 지도(Naver/Google)와 리스트 뷰 제공

---

### Phase 3: 프리미엄 및 고도화

- 목표: 수익 모델 다각화 및 충성 사용자(Loyal User)를 위한 고급 기능 제공.

#### 2.7. 프리미엄 기능 (수익 모델 확장)

- **통계 기반 추천 번호 (유료):**
  - 최근 100회차 데이터 기반으로 **출현 빈도, 미출현 기간, 홀짝/합계 패턴** 등을 종합 분석한 추천 조합 제공. 'AI 예측'이 아닌 통계적 분석 결과임을 명시.
  - 회차당 1~3개의 추천 세트를 인앱 결제(IAP)로 판매.
- **프리미엄 분석 리포트:**
  - 특정 번호 조합의 과거 당첨 유사도, 고급 패턴(궁합수, 동끝수 심화) 등 심층 분석 정보 제공.
  - 월 구독 모델 적용(광고 제거 혜택 포함).

#### 2.8. 사용자 온보딩 (Onboarding)

- **목표:** 신규 사용자가 앱의 주요 기능을 쉽게 학습하고 활용하도록 유도.
- **내용:** 앱 최초 실행 시 주요 기능(QR 스캔, 번호 분석)을 소개하는 튜토리얼 화면 추가.
- **우선순위:** 낮음 (Phase 3 진행 시 혹은 필요에 따라 앞당겨 적용)

3. 기술 스택 및 API 명세

#### 3.1. 기술 스택

- 프론트엔드: React Native (Expo)
- 상태 관리: Zustand 또는 Redux Toolkit
- 지도: Naver Maps API / Google Maps API
- 차트: react-native-svg, Victory Native
- 인앱 결제: react-native-iap
- 광고: Google AdMob

#### 3.2. 데이터 API 명세

- **Endpoint**: `https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo={회차번호}`
- **Method**: `GET`
- **Response Schema** (`returnValue: "success"` 기준):
| Key             | Type   | Description                      | 예시            |
|-----------------|--------|----------------------------------|-----------------|
| `returnValue`   | String | 요청 성공 여부 ("success" 또는 "fail") | "success"       |
| `drwNo`         | Number | 로또 회차                        | 1000            |
| `drwNoDate`     | String | 추첨일 (YYYY-MM-DD)              | "2022-01-29"    |
| `drwtNo1`~`drwtNo6` | Number | 1~6번 당첨 번호                  | 2, 8, 19, 22, 32, 42 |
| `bnusNo`        | Number | 보너스 번호                      | 39              |
| `totSellamnt`   | Number | 총 판매금액 (원)                 | 118628811000    |
| `firstWinamnt`  | Number | 1등 당첨금 (원)                  | 1246819620      |
| `firstPrzwnerCo`| Number | 1등 당첨자 수                    | 22              |
| `firstAccumamnt`| Number | 1등 당첨금 총액 (이월금 포함)    | 27430031640     |

4. 디자인 톤앤매너

- 심플 + 모던 UI
- 주 색상: 블루 & 옐로우 (신뢰감 + 긍정적 분위기)
- 데이터 시각화: 바 차트, 원형 차트 등 가독성 높은 차트 활용
- 불필요한 장식 최소화, 명확한 폰트 사용

5. 사용자 경험(UX) 및 정책

#### 5.1. 오프라인 및 에러 처리

- **오프라인 상태:**
  - 앱 실행 시 인터넷 연결 확인. 미연결 시 "인터넷 연결을 확인해주세요." 스낵바/팝업 안내.
  - 이전에 조회했던 데이터가 캐시되어 있는 경우, 마지막으로 로드된 데이터를 보여주고 화면 상단에 "오프라인 상태입니다." 메시지 표시.
- **API 에러:**
  - 동행복권 API 호출 실패 시 (e.g., 서버 점검, 잘못된 요청): "데이터를 불러오는 데 실패했습니다. 잠시 후 다시 시도해주세요." 메시지 표시.
  - 특정 기능(e.g., QR 스캔)에서 에러 발생 시, 해당 기능 영역에만 에러 상태를 명시하고 다른 기능은 정상적으로 사용 가능하도록 처리.

#### 5.2. 이용약관 및 개인정보처리방침

- **이용약관:** 유료 결제, 데이터 제공 책임 면책 조항 포함.
- **개인정보처리방침:** 위치기반 서비스(판매점 찾기), 광고, 인앱 결제 시 필수.
- **필수 고지 항목:**
  - 서비스 이용 목적
  - 데이터 출처 명시: "본 앱의 모든 데이터는 동행복권(dhlottery.co.kr)에서 제공하는 정보를 기반으로 합니다."
  - 책임 면책 조항: "번호 분석 및 추천 정보는 통계적 데이터를 기반으로 하며, 당첨을 보장하지 않습니다."

6. 추가 고려 사항

- Phase 2 이상 기능 개발 시, API 호출량 증가 및 복잡한 데이터 가공을 위해 자체 백엔드 서버 도입 고려. (초기 버전은 서버리스)
- 앱스토어/구글플레이 심사 시 ‘도박 관련 앱’이 아닌 '정보 제공 및 분석' 앱으로 포지셔닝하여 정책 준수.
