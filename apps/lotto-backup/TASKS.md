# @lotto 작업 진행 상황 (PRD v1.1 반영)

- 본 계획은 `docs/lotto/PRD.md`에 정의된 **단계별 로드맵**을 따릅니다.
- **현재 M1 단계 95% 완료**: 당초 계획보다 훨씬 많은 기능이 구현되었습니다.
- ✅ **로또 API 완전 연동**: 실시간 당첨 번호 조회, 회차별 네비게이션, 에러 핸들링
- ✅ **고급 UI/UX**: Pretendard 폰트, 번호별 색상 구분, 한국어 현지화

## 참고 문서

- **제품 요구사항 문서 (PRD):** `docs/lotto/PRD.md` (Version 1.1)

## 마일스톤 및 작업 계획

### M1: Phase 1 (MVP) - 95% 완료 ✅

- **목표:** PRD의 Phase 1에 명시된 핵심 기능(최신 당첨 번호 확인, QR 스캔)의 UI/UX를 완성합니다.
- **상태:** **계획보다 훨씬 많이 구현됨** - 정적 데이터가 아닌 실제 API 연동까지 완료

#### ✅ 완료된 화면 및 기능

- **✅ 홈 (최신 회차 정보):** `app/(tabs)/index.tsx`
  - ✅ 스크롤에 따라 축소되는 Parallax 헤더 (`ParallaxHeader`)
  - ✅ 최신 당첨 요약 카드 (`LatestDrawCard`) - **실제 API 연동**
  - ✅ 당첨 번호 6+1 칩 (`NumberChips`) - **번호별 색상 구분 시스템**
  - ✅ **추가 구현:** 이전/다음 회차 네비게이션, 실시간 로딩, 에러 핸들링
  - ✅ 알림 설정 배너 (`InsightBanner`)
  - ✅ 기능 메뉴 (`FeatureMenu`)

#### ❌ 미완료 항목

- **❌ 빠른 당첨 확인 (QR 스캔):** `app/(tabs)/scan.tsx` - **누락됨**
  - 카메라 권한 요청 안내 UI
  - 스캔 프레임 모형
  - 스캔 결과 Bottom Sheet 목업

#### ✅ 완료된 공통 컴포넌트

- **✅ 내비게이션:** Expo Router 기반 하단 탭 (`app/(tabs)/_layout.tsx`)
  - 현재: 홈 탭만 구현 (QR 스캔 탭 누락)
- **✅ 핵심 UI 컴포넌트:**
  - `ParallaxScrollView.tsx`: 고급 스크롤 인터랙션
  - `ThemedText.tsx`, `ThemedView.tsx`: **Pretendard 폰트 시스템**
  - `NumberChips.tsx`: **번호별 색상 구분 (1-9: 노란색, 10-19: 파란색 등)**
  - `LatestDrawCard.tsx`: 완전한 당첨 정보 표시 카드
- **✅ 서비스 레이어:**
  - `services/lotto.ts`: **완전한 동행복권 API 연동**
  - `hooks/useLotto.ts`: 상태 관리 및 네비게이션 로직

---

### M2: Phase 2 레이아웃 스켈레톤 구축 - 미착수

- **목표:** Phase 2 기능(번호 분석, 번호 생성, 판매점 정보)의 화면 레이아웃을 구현합니다.
- **우선순위:** M1 QR 스캔 화면 완료 후 진행

#### 계획된 화면들 (정적 레이아웃)

- **번호 분석:** `app/(tabs)/analysis.tsx` - 미착수
  - 탭 UI (`SegmentedControl.tsx`): 출현, 반복, 홀짝 등
  - 각 탭 차트 자리표시자 (`components/charts/*`)
- **번호 생성:** `app/(tabs)/generate.tsx` - 미착수
  - 탭 UI: 랜덤, 조건 생성 등
  - 번호 조합 카드, 조건 설정 UI 컨트롤 목업
- **판매점 정보:** `app/(tabs)/stores.tsx` - 미착수
  - 지도 자리표시자 (`components/map/MapPlaceholder.tsx`)
  - 지도/리스트 전환 토글
  - 판매점 정보 카드 리스트 (`components/store/StoreListItem.tsx`)

#### 준비된 컴포넌트들

- **✅ 기존 컴포넌트 재활용 가능:**
  - `SegmentedControl.tsx`: 탭 UI용 (현재 미사용)
  - `WeeklyStrip.tsx`: 날짜/기간 선택용 (현재 미사용)
  - `charts/BarPlaceholder.tsx`: 차트 자리표시자

---

### M3: Phase 3 및 기타 화면 레이아웃 스켈레톤 구축

- **목표:** 프리미엄 기능, 설정 등 Phase 3 및 기타 보조 화면들의 레이아웃을 구현합니다.

#### 화면 스켈레톤 (정적)

- **프리미엄 소개:** `app/(stack)/premium.tsx`
  - 유료 기능 소개 카드
  - 인앱 결제(IAP) 버튼 목업
- **설정 및 법정 고지:** `app/(stack)/settings.tsx`, `app/(stack)/legal.tsx`
  - 섹션 리스트 UI (계정, 알림, 권한 등)
  - 데이터 출처 및 면책 조항 표시를 위한 텍스트 뷰

#### 테마 및 폴리싱 (M3)

- **테마 정의:** `theme/tokens.ts` 에 컬러, 타이포그래피, 간격 등 디자인 토큰 정의
- **일관성 적용:** 모든 화면에 정의된 테마를 일관되게 적용하고 접근성(VoiceOver, TalkBack) 라벨 추가 검토

## 📊 현재 진행 상황 요약

### ✅ **완료된 것들 (예상보다 훨씬 많음)**

- **홈 화면**: 실제 API 연동까지 완료 (정적 데이터가 아님)
- **로또 API 서비스**: 완전한 동행복권 API 연동
- **고급 UI/UX**: Pretendard 폰트, 색상 시스템, 한국어 현지화
- **상태 관리**: 회차별 네비게이션, 에러 핸들링

### 🎯 **즉시 할 일 (M1 완료)**

1. **QR 스캔 화면** 구현 (`app/(tabs)/scan.tsx`)
2. **탭 네비게이션**에 "빠른 당첨 확인" 탭 추가

### 📋 **다음 단계 (M2)**

- 번호 분석, 생성, 판매점 정보 화면들

## 수용 기준 (Acceptance Criteria) - 업데이트

- **✅ M1 95% 완료:**
  - ✅ '홈' 화면은 **실제 API 연동**으로 최신 회차 정보를 보여준다
  - ✅ **추가 달성:** 회차별 네비게이션, 실시간 업데이트, 에러 핸들링
  - ❌ **미완료:** '빠른 당첨 확인' 탭 및 화면 누락
- **M2, M3 대기 중:** M1 QR 스캔 완료 후 시작

## 범위 수정 (원래 계획 vs 실제 구현)

### ✅ **범위 외였지만 이미 구현됨**

- ~~동행복권 API 실제 연동 및 데이터 처리 로직~~ → **완료됨**
- ~~사용자 상태 관리 및 네비게이션 로직~~ → **완료됨**

### 🔄 **여전히 범위 외 (향후 고려)**

- QR 코드 리더기 구현 및 당첨 판정 로직
- 위치 권한 요청, 지도 연동(핀 표시, 길찾기 등)
- 인앱 결제 및 광고(AdMob) SDK 연동
- 사용자 계정, 인증, 데이터 로컬 저장/동기화
